<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>

    <!-- Latest compiled and minified CSS & JS -->
    <!-- Boilerplate code suggested by coursework-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<!-- Light styling for prettey buttons, no real need for a CSS in this 2-page project -->
<style>
    label input[type="radio"]~i.fa.fa-circle-o {
        color: #c8c8c8;
        display: inline;
    }

    label input[type="radio"]~i.fa.fa-dot-circle-o {
        display: none;
    }

    label input[type="radio"]:checked~i.fa.fa-circle-o {
        display: none;
    }

    label input[type="radio"]:checked~i.fa.fa-dot-circle-o {
        color: #7AA3CC;
        display: inline;
    }

    input[type="radio"]:checked {
        visibility: hidden;
    }

    input[type="radio"] {
        visibility: hidden;
    }

    body {
        margin: 40px;
    }

    .modal-body {
        background-image: url("/public/images/12.jpg")
    }
</style>

<body background="/public/images/12.jpg">
    <div class="modal fade" id="matchRev" tabindex="-1" role="dialog" aria-labelledby="matchup" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <!--Don't foget to prepend match name into the 'matchname' header-->
                    <h5 class="modal-title" id="matchname"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class=container>
                        <!--prepend match content here!-->
                        <img id="matchPic" src="/public/images/box-cheerful-color-207983.jpg" width=100%>
                    </div>
                </div>
                <!-- <div class="modal-footer">
                email feature disabled, not required, and some security mesures should be looked into.
                <button type="button" class="btn btn-primary">Email?</button>
            </div> -->
            </div>
        </div>
    </div>

    <div class="modal fade" id="catchErr" tabindex="-1" role="dialog" aria-labelledby="error" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <!--error messages-->
                    <h5 class="modal-title" id="whoops"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class=container>
                        <!--prepend errorcontent here!-->
                        <p id="errmess"></p>
                        <img id="notepic" src="/public/images/broken-conceptual-cracked-1906537.jpg" width=100%>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="jumbotron">
            <h1 class="test-center">Friend Finder Survey</h1>
            <br>
            <div class="container alert alert-primary">
                <h5>Answer the survey questions with your responses ranging from 5(Strongly Agree) to 1(Strongly
                    Disagree)</h5>
            </div>
        </div>
        <br>
        <div class="col-lg-12" id="quesions">
            <div class="card-body">
                <form role="form">
                    <div class="form-group alert alert-dark">
                        <h5>Name:</h5>
                        <div class="container alert alert-primary">
                            <h7>Your name here:</h7>
                            <label for="user-name"></label>
                            <input type="text" class="form-control" id="user-name">
                        </div>
                    </div>
                    <!-- <div class="form-group">
                        check about email gathering and validation
                        <label for="user-email">email:</label>
                        <input type="email" class="form-control" id="user-email">
                    </div> -->
                    <div class="form-group alert alert-dark">
                        <h5>Photo URL:</h5>
                        <div class="container alert alert-primary">
                            <h7>Please leave a legitimate photo link:</h7>
                            <!--resource validation is becoming important, look this up too; not required now.-->
                            <label for="user-photo"></label>
                            <input type="text" class="form-control" id="user-photo">
                        </div>
                    </div>

<!-- questions go here, try to procedually generate them with a randomized selection. -->
<!-- EDIT: Nope, just get this done, and let whatever company you work for give you the content. -->
                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 1:</h5> You like extravagant vacations!<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q1" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q1" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q1" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q1" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q1" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 2:</h5> Theme parks are fun!<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q2" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q2" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q2" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q2" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q2" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 3:</h5> Who wants to take a walk in the woods?<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q3" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q3" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q3" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q3" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q3" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 4:</h5> Let's build something with Legos!<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q4" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q4" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q4" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q4" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q4" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 5:</h5> Beach Time!!!<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q5" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q5" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q5" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q5" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q5" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 6:</h5> Warm blanket, and a fireplace sounds nice.<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q6" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q6" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q6" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q6" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q6" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 7:</h5> Time to hit the slopes!<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q7" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q7" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q7" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q7" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q7" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 8:</h5> Singing is my favorite!<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q8" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q8" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q8" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q8" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q8" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 9:</h5> Dancing is best!<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q9" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q9" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q9" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q9" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q9" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>


                    <div class="form-group alert alert-dark">
                        <h5 class="title">Question 10:</h5> You like cookies...<br>
                        <div class="container alert alert-primary">
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q10" value="1"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>1
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q10" value="2"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>2
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q10" value="3"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>3
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q10" value="4"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>4
                            </label>
                            <label class="radio-inline btn-circle btn-sm">
                                <input type="radio" name="q10" value="5"><i class="fa fa-circle-o fa-2x"></i><i
                                    class="fa fa-dot-circle-o fa-2x"></i>5
                            </label>
                        </div>
                    </div>

                    <div class="form-group alert alert-dark">
                        <div class="container alert alert-primary text-center">
                            <label for="match-go btn-lg">
                                <button type="submit" class="btn btn-lg alert-dark submit" id="match-go">Find Your
                                    Match!</button>
                            </label>
                        </div>
                    </div>

                </form>
            </div>
        </div>

    </div>

    <footer class="footer">
        <a href="/home"><button class="btn"><i class="fa fa-arrow-left"></i>Back?</button></a>
        <a href="/api/friends"><button class="btn"><i class="fa fa-file-radio-o"></i>Friend Data</button></a>
        <a href="https://github.com/TibiriusUB/FriendFinder"><button class="btn"><i
                    class="fa fa-list-alt"></i>Repository</button></a>
    </footer>
</body>

</html>

<!-- simple script mimicing coursework data gathering with a blunt API post-->
<script type="text/javascript">

    const erNo = {
        a: "ERROR!",
        b: "NOTE:",
        c: "Please enter name and photo link!",
        d: "Please make sure all questions are answered!",
        e: "Uh-oh",
        f: "Adding to the Mingle!",
        g:"/public/images/broken-conceptual-cracked-1906537.jpg",
        h:"/public/images/box-cheerful-color-207983.jpg"
    }

    //API call for friends list
    function partyLine(NF, cb) {
        $.ajax({ url: "/api/friends", method: "GET" })
            .then(function (friendsList) {
                // Log(friendsList)

                cb(friendsList)
            });
    }
    //modal launch
    function matchReveal(match) {
        console.log(match)
        $("#matchname").text(match.name)
        $("#matchPic").attr("src", match.photo)
        $('#matchRev').modal()
    };

    //notification modal
    function catchNote(noterr) {
        console.log(noterr)
        $("#whoops").text(noterr[0])
        $("#errmess").text(noterr[1])
        $("#notepic").attr("src",noterr[2])
        $('#catchErr').modal()
    };

    //match-making logic
    function matchingGame(newFriend, friendsList) {
        var scoreChart = []
        var matchScore = 0
        for (d = 0; d < friendsList.length; d++) {
            for (a = 0; a < newFriend.scores.length; a++) {
                matchScore = matchScore + ((Math.abs(newFriend.scores[a] - friendsList[d].scores[a])))
            }
            scoreChart.push(matchScore);
            matchScore = 0;
        }

        mateMatch = scoreChart[0]
        for (f = 0; f < scoreChart.length; f++) {
            if (mateMatch > scoreChart[f]) {
                mateMatch = scoreChart[f]
            }
        }
        matchMade = scoreChart.indexOf(mateMatch)
        addNewFriend(newFriend)
        //activate MODAL!    
        matchReveal(friendsList[matchMade])
    };

    //adds new user into the mix, not required.
    function addNewFriend(newFriend) {
        $.post("api/friends", newFriend, function (data) {
            if (data) {
                catchNote([erNo.a, erNo.e,erNo.g])
            } else {
                catchNote([erNo.b, erNo.f,erNo.h])
            }

            $("newName").val("");
            $("newPhoto").val("");
            $("newAnswers").val([]);
        });
    }

    //user info gathering, and 'friend object' construction.
    $(".submit").on("click", function (event) {
        event.preventDefault();

        let conga = false
        if (($("#user-name").val().trim()) &&
            ($("#user-photo").val().trim()) &&
            parseInt($("input[name='q1']:checked").val()) &&
            parseInt($("input[name='q2']:checked").val()) &&
            parseInt($("input[name='q3']:checked").val()) &&
            parseInt($("input[name='q4']:checked").val()) &&
            parseInt($("input[name='q5']:checked").val()) &&
            parseInt($("input[name='q6']:checked").val()) &&
            parseInt($("input[name='q7']:checked").val()) &&
            parseInt($("input[name='q8']:checked").val()) &&
            parseInt($("input[name='q9']:checked").val()) &&
            parseInt($("input[name='q10']:checked").val())
        ) {
            conga = true
        };

        if (conga) {

            var newFriend = {
                name: $("#user-name").val().trim(),
                photo: $("#user-photo").val().trim(),
                scores: [
                    parseInt($("input[name='q1']:checked").val()),
                    parseInt($("input[name='q2']:checked").val()),
                    parseInt($("input[name='q3']:checked").val()),
                    parseInt($("input[name='q4']:checked").val()),
                    parseInt($("input[name='q5']:checked").val()),
                    parseInt($("input[name='q6']:checked").val()),
                    parseInt($("input[name='q7']:checked").val()),
                    parseInt($("input[name='q8']:checked").val()),
                    parseInt($("input[name='q9']:checked").val()),
                    parseInt($("input[name='q10']:checked").val())
                ]
            };

            console.log(newFriend)

            partyLine(newFriend, function (res) {
                matchingGame(newFriend, res)
            });

        } else {
            catchNote([erNo.a, erNo.d,erNo.g])
        };
    })
</script>